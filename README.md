# Weather Tourism Pipeline — Отчет

## 1. Описание процесса

### Выбранные города

Мы использовали 5 международных городов: **Нью-Йорк**, **Лондон**, **Мюнхен**, **Фукуока**, **Рио-де-Жанейро**.Города выбраны с целью показать работу пайплайна на разных климатических зонах и часовых поясах:

- **Нью-Йорк** — крупный мегаполис с умеренным климатом, деловой и туристический центр.
- **Лондон** — европейская столица с мягким, влажным климатом.
- **Мюнхен** — центральноевропейский город с умеренно-континентальным климатом.
- **Фукуока** — японский город с мягкой зимой и тёплым летом.
- **Рио-де-Жанейро** — тропический климат, морской курорт.

### Проблемы при сборе данных

- Ограничения бесплатного API OpenWeather (лимит запросов).
- Разные языки и форматы названий городов (New York vs Нью-Йорк).
- Иногда отсутствуют поля, например описание погоды или скорость ветра.
- Разные часовые пояса, которые нужно учитывать при сборе данных.

### Правила очистки

- **Температура и `feels_like`** приведены к целым числам (округление).
- **Названия городов** стандартизированы по справочнику `city_reference.csv` на русском языке.
- **Время** приведение к единому формату `YYYY-MM-DD HH:MM:SS`.
- **Валидация**: фильтрация данных, температура должна быть в диапазоне −50 … +60 °C.

---

## 2. Анализ результатов

### Самая комфортная погода

Согласно рассчитанному `comfort_index`, наиболее комфортная погода на момент сбора данных была в:

- **Мюнхен** и **Фукуока** — умеренная температура, комфортная влажность и слабый ветер.

### Наиболее привлекательные федеральные округа / регионы

- **Северная Америка** (Нью-Йорк) и **Европа** (Лондон, Мюнхен) показали наилучшие средние показатели комфорта.
- **Южная Америка** (Рио-де-Жанейро) имеет жаркий климат, комфортность зависит от сезона.

### Рекомендации турагентствам

- Продвигать туры в **Мюнхен** и **Фукуока** как наиболее комфортные по погоде.
- В **Рио-де-Жанейро** и **Нью-Йорке** при неблагоприятной погоде предлагать indoor-активности (музеи, выставки).
- В **Лондоне** учитывать высокую вероятность осадков — рекомендовать зонты.

---

## 3. Архитектурные решения

### Структура папок

Многоуровневая структура: data/raw → data/cleaned → data/enriched → data/aggregated

Преимущества:

- Упрощает повторную обработку и аудит данных.
- Исходные данные (RAW) остаются неизменными.
- Чёткое разделение стадий пайплайна: очистка, обогащение, агрегация.

### Метаданные

- **collection_time** — время получения данных.
- **source** — источник данных (openweathermap.org).
- **city_name** и **federal_district/region** — для аналитики по географии (в данном случае части света).
- **timezone** — корректная обработка локального времени.

### Масштабирование на 100 городов

- Поддержка справочника с координатами, федеральным округом, часовыми поясами.
- Параллельный сбор данных (threading/async) или через очередь заданий (Airflow).
- Сохранение данных на S3/HDFS для масштабируемости.
- Автоматизация логирования и валидации.

---

## 4. Выводы и улучшения

### Что можно улучшить

- Автоматическая проверка качества данных и отчёты о пропусках/ошибках.
- Кэширование API для снижения нагрузки.
- Визуализация комфортности городов на интерактивных дашбордах (Power BI, Grafana).

### Дополнительные данные

- AQI — индексы качества воздуха.
- Прогноз погоды на 7–14 дней.
- Мероприятия и сезонные события в городах.

### Автоматизация процесса

- Ежедневный запуск пайплайна через cron или Airflow.
- Центральная система логирования (ELK/CloudWatch).
- Автоматическая рассылка CSV-отчётов для турагентств по email или FTP.
